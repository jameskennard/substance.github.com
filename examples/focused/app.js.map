{"version":3,"file":"app.js","sources":["../../focused/app.js"],"sourcesContent":["import {\n  Component, ProseEditor, DocumentNode, ProseEditorConfigurator,\n  EditorSession, ProseEditorPackage,\n} from 'substance'\n\n/*\n  Node definition\n*/\n\nclass Alien extends DocumentNode {}\n\nAlien.define({\n  type: 'alien',\n  mood: { type: 'string', default: 'normal' }\n})\n\nconst _moods = ['normal', 'angry', 'excited', 'sad', 'sick']\n\n/*\n  Node display component\n*/\nclass AlienComponent extends Component {\n\n  didMount() {\n    this.context.editorSession.onRender('document', this.rerender, this, {\n      path: [this.props.node.id, 'mood']\n    })\n  }\n\n  dispose() {\n    this.context.editorSession.off(this)\n  }\n\n  render($$) {\n    let el = $$('div').addClass('sc-alien sg-hide-selection')\n    el.append(\n      $$('img').attr('height', 100).attr('src', 'assets/alien.svg')\n    )\n    if (this.props.node.mood) {\n      el.addClass('sm-' + this.props.node.mood)\n    }\n    // only render the over when not disabled\n    if (!this.props.disabled) {\n      let overlay = $$('div').addClass('se-overlay').append(\n        $$('div').addClass('se-controls').append(\n          $$('button').append('Click Here').on('mousedown', this.onMousedown)\n        )\n      )\n      el.append(overlay)\n    }\n    return el\n  }\n\n  getDocument() {\n    return this.props.node.getDocument()\n  }\n\n  onMousedown(event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    let editorSession = this.context.editorSession\n    let node = this.props.node\n\n    let mood = node.mood || 'normal'\n    let idx = _moods.indexOf(mood)\n    idx = (idx+1) % _moods.length\n    mood = _moods[idx]\n    editorSession.transaction(function(tx) {\n      tx.set([node.id, 'mood'], mood)\n    })\n    this.rerender()\n  }\n}\n\n/*\n  Package definition of your inline image plugin\n*/\nconst AlienPackage = {\n  name: 'alien',\n  configure: function(config) {\n    config.addNode(Alien)\n    config.addComponent(Alien.type, AlienComponent)\n  }\n}\n\n/*\n  Example document\n*/\nconst fixture = function(tx) {\n  let body = tx.get('body')\n  tx.create({\n    id: 'title',\n    type: 'heading',\n    level: 1,\n    content: 'Focused Element'\n  })\n  body.show('title')\n  tx.create({\n    id: 'intro',\n    type: 'paragraph',\n    content: [\n      \"This shows a custom node which exposes a UI only when focused.\"\n    ].join(' ')\n  })\n  body.show('intro')\n  tx.create({\n    type: 'alien',\n    id: 'alien'\n  })\n  body.show('alien')\n  tx.create({\n    id: 'the-end',\n    type: 'paragraph',\n    content: [\n      \"That's it.\"\n    ].join('')\n  })\n  body.show('the-end')\n}\n\n/*\n  Application\n*/\nlet cfg = new ProseEditorConfigurator()\ncfg.import(ProseEditorPackage)\ncfg.import(AlienPackage)\n\nwindow.onload = function() {\n  let doc = cfg.createArticle(fixture)\n  let editorSession = new EditorSession(doc, {\n    configurator: cfg\n  })\n  ProseEditor.mount({\n    editorSession: editorSession\n  }, document.body)\n}\n\n"],"names":["DocumentNode","const","let","Component","ProseEditorConfigurator","ProseEditorPackage","EditorSession","ProseEditor"],"mappings":"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"}