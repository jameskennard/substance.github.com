{"version":3,"file":"app.js","sources":["../../form/app.js"],"sourcesContent":["import {\n  ProseEditor, ProseEditorConfigurator, EditorSession, DocumentNode,\n  ProseEditorPackage, BlockNodeComponent, TextPropertyEditor\n} from 'substance'\n\n/*\n  Node definition\n*/\nclass EntityNode extends DocumentNode {}\n\nEntityNode.define({\n  type: 'entity',\n  name: 'text',\n  description: 'text'\n})\n\n/*\n  Node display component\n*/\nclass EntityComponent extends BlockNodeComponent {\n  render($$) {\n    let el = $$('div').addClass('sc-entity')\n\n    el.append(\n      $$('div').ref('title').addClass('se-title').append('Entity')\n    )\n\n    let table = $$('table')\n    table.append(\n      $$('colgroup').append(\n        $$('col').addClass('se-label-col'),\n        $$('col').addClass('se-value-col')\n      )\n    )\n\n    let nameRow = $$('tr')\n    nameRow.append($$('td').addClass('se-label').append('Name:'))\n    nameRow.append($$('td').addClass('se-value').append(\n      $$(TextPropertyEditor, {\n        path: [this.props.node.id, 'name'],\n        disabled: this.props.disabled\n      }).ref('nameEditor')\n    ))\n    table.append(nameRow)\n    table.append($$('tr').addClass('se-separator'))\n\n    let descriptionRow = $$('tr')\n    descriptionRow.append($$('td').addClass('se-label').append('Description:'))\n    descriptionRow.append($$('td').addClass('se-value').append(\n      $$(TextPropertyEditor, {\n        path: [this.props.node.id, 'description'],\n        disabled: this.props.disabled\n      }).ref('descriptionEditor')\n    ))\n    table.append(descriptionRow)\n    el.append(table)\n    return el\n  }\n}\n\n/*\n  Package definition of your plugin\n*/\nconst EntityPackage = {\n  name: 'entity',\n  configure: function(config) {\n    config.addNode(EntityNode)\n    config.addComponent(EntityNode.type, EntityComponent)\n    config.addLabel('entity', 'Entity')\n    config.addLabel('entity.name', 'Name')\n    config.addLabel('entity.description', 'Description')\n  }\n}\n\n/*\n  Example document\n*/\nconst fixture = function(tx) {\n  let body = tx.get('body')\n  tx.create({\n    id: 'title',\n    type: 'heading',\n    level: 1,\n    content: 'Embedded Forms'\n  })\n  body.show('title')\n  tx.create({\n    id: 'intro',\n    type: 'paragraph',\n    content: [\n      \"It is very easy to add a node with a form editing interface.\",\n      \"For example this is very useful to create meta-data editors.\"\n    ].join(' ')\n  })\n  body.show('intro')\n  tx.create({\n    type: 'entity',\n    id: 'entity',\n    name: 'Foo',\n    description: 'Bar'\n  })\n  body.show('entity')\n  tx.create({\n    id: 'the-end',\n    type: 'paragraph',\n    content: \"That's it.\"\n  })\n  body.show('the-end')\n}\n\n/*\n  Application\n*/\nlet cfg = new ProseEditorConfigurator()\ncfg.import(ProseEditorPackage)\ncfg.import(EntityPackage)\n\nwindow.onload = function() {\n  let doc = cfg.createArticle(fixture)\n  let editorSession = new EditorSession(doc, {\n    configurator: cfg\n  })\n  ProseEditor.mount({\n    editorSession: editorSession\n  }, document.body)\n}\n"],"names":["DocumentNode","let","TextPropertyEditor","BlockNodeComponent","const","ProseEditorConfigurator","ProseEditorPackage","EditorSession","ProseEditor"],"mappings":"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"}