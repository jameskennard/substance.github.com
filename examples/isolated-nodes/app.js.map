{"version":3,"file":"app.js","sources":["../../isolated-nodes/ExampleFigureNode.js","../../isolated-nodes/ExampleFigureComponent.js","../../inline-node/InlineImage.js","../../inline-node/InlineImageComponent.js","../../inline-node/EditInlineImageTool.js","../../inline-node/InlineImagePackage.js","../../isolated-nodes/fixture.js","../../isolated-nodes/app.js"],"sourcesContent":["import { BlockNode } from 'substance'\n\nclass ExampleFigureNode extends BlockNode {}\n\nExampleFigureNode.type = 'figure'\n\nExampleFigureNode.schema = {\n  url: 'string',\n  caption: 'text'\n}\n\nexport default ExampleFigureNode\n","import { Component, TextPropertyEditor } from 'substance'\n\nclass ExampleFigureComponent extends Component {\n\n  render($$) {\n    let node = this.props.node\n    let el = $$('div').addClass('sc-figure')\n    el.append(\n      $$('img').ref('image')\n        .attr('src', node.url)\n        .attr('draggable', true)\n    )\n    el.append($$(TextPropertyEditor, {\n      path: [node.id, 'caption'],\n      disabled: this.props.disabled\n    }).ref('caption'))\n    return el\n  }\n\n}\n\nExampleFigureComponent.noBlocker = true\n\nexport default ExampleFigureComponent","import { InlineNode } from 'substance'\n\nclass InlineImage extends InlineNode {}\n\nInlineImage.type = 'inline-image'\nInlineImage.schema = {\n  src: { type: 'string', 'default': './assets/smile.png'}\n}\n\nexport default InlineImage","import { Component } from 'substance'\n\nclass InlineImageComponent extends Component {\n  didMount() {\n    this.context.editorSession.onRender('document', this.rerender, this, {\n      path: [this.props.node.id, 'src']\n    })\n  }\n\n  dispose() {\n    this.context.editorSession.off(this)\n  }\n\n  render($$) {\n    let el = $$('img')\n      .attr('src', this.props.node.src)\n      .addClass('sc-inline-image');\n    return el;\n  }\n}\n\nexport default InlineImageComponent","import { Tool } from 'substance'\n\n/*\n  Edit the src of an existing inline image\n*/\nclass EditInlineImageTool extends Tool {\n\n  getUrlPath() {\n    let propPath = this.constructor.urlPropertyPath\n    return [this.props.node.id].concat(propPath)\n  }\n\n  render($$) {\n    let Input = this.getComponent('input')\n    let Button = this.getComponent('button')\n    let el = $$('div').addClass('sc-edit-link-tool')\n    let urlPath = this.getUrlPath()\n\n    el.append(\n      $$(Input, {\n        type: 'url',\n        path: urlPath,\n        placeholder: 'Paste or type an image url'\n      }),\n      $$(Button, {\n        icon: 'delete',\n        style: this.props.style\n      }).on('click', this.onDelete)\n    )\n    return el\n  }\n\n  onDelete() {\n    let editorSession = this.context.editorSession\n    editorSession.transaction(function(tx) {\n      tx.deleteSelection()\n    })\n  }\n}\n\nEditInlineImageTool.urlPropertyPath = ['src']\n\nexport default EditInlineImageTool","import { AnnotationTool, InsertInlineNodeCommand, EditInlineNodeCommand } from 'substance'\nimport InlineImage from './InlineImage'\nimport InlineImageComponent from './InlineImageComponent'\nimport EditInlineImageTool from './EditInlineImageTool'\n\n\n/*\n  Package definition of your inline image plugin\n*/\nexport default {\n  name: 'inline-image',\n  configure: function(config) {\n    config.addNode(InlineImage)\n    config.addComponent(InlineImage.type, InlineImageComponent)\n    config.addCommand('add-inline-image', InsertInlineNodeCommand, {nodeType: InlineImage.type})\n    config.addCommand('edit-inline-image', EditInlineNodeCommand, {nodeType: InlineImage.type})\n    config.addTool('add-inline-image', AnnotationTool, { toolGroup: 'insert'})\n    config.addTool('edit-inline-image', EditInlineImageTool, { toolGroup: 'overlay' })\n    config.addIcon('add-inline-image', { 'fontawesome': 'fa-image' })\n    config.addLabel('add-inline-image', 'Inline Image')\n  }\n}\n","export default function(tx) {\n  let body = tx.get('body')\n  tx.create({\n    id: 'p1',\n    type: 'paragraph',\n    content: \"Below you find all variants of IsolatedNodes.\"\n  })\n  body.show('p1')\n\n  tx.create({\n    id: 'p2',\n    type: 'paragraph',\n    content: \"A regular IsolatedNode keeps the content blocked unless the user activates it with a double-click. The most prominent example is a Table.\"\n  })\n  body.show('p2')\n\n  // row-1\n  tx.create({ id: 'tc1', type: 'table-cell', content: \"A1:A2\", rowspan: 2 })\n  tx.create({ id: 'tc2', type: 'table-cell', content: \"B1\", colspan: 2 })\n  // row-2\n  tx.create({ id: 'tc3', type: 'table-cell', content: \"B2\"})\n  tx.create({ id: 'tc4', type: 'table-cell', content: \"C2\"})\n  // row-3\n  tx.create({ id: 'tc5', type: 'table-cell', content: \"A3\"})\n  tx.create({ id: 'tc6', type: 'table-cell', content: \"B3\"})\n  tx.create({ id: 'tc7', type: 'table-cell', content: \"C3\"})\n\n  tx.create({\n    id: 't1',\n    type: 'table',\n    // null values mark merged cells\n    cells: [\n      ['tc1', 'tc2', null ],\n      [null, 'tc3', 'tc4'],\n      ['tc5', 'tc6', 'tc7']\n    ]\n  })\n  body.show('t1')\n\n  tx.create({\n    id: 'p3',\n    type: 'paragraph',\n    content: \"An open IsolatedNode does not shield the content with a blocker. It is more accessible, but a little trickier to implement correctly.\"\n  })\n  body.show('p3')\n\n  tx.create({\n    id: 'fig1',\n    type: 'figure',\n    url: './assets/alien.svg',\n    caption: 'This is the figure caption'\n  })\n  body.show('fig1')\n\n  tx.create({\n    id: 'p4',\n    type: 'paragraph',\n    content: \"An InlineNode is the last variant. The most prominent example is an InlineImage $.\"\n  })\n  body.show('p4')\n  tx.create({\n    type: 'inline-image',\n    id: 'im1',\n    src: './assets/smile.png',\n    path: ['p4', 'content'],\n    startOffset: 80,\n    endOffset: 81\n  })\n\n}","import {\n  ProseEditor, ProseEditorConfigurator, EditorSession,\n  ProseEditorPackage\n} from 'substance'\nimport ExampleFigureNode from './ExampleFigureNode'\nimport ExampleFigureComponent from './ExampleFigureComponent'\nimport InlineImagePackage from '../inline-node/InlineImagePackage'\nimport fixture from './fixture'\n\n\nwindow.onload = function() {\n  let cfg = new ProseEditorConfigurator()\n\n  cfg.import(ProseEditorPackage)\n  cfg.import(InlineImagePackage)\n\n  cfg.addNode(ExampleFigureNode)\n  cfg.addComponent(ExampleFigureNode.type, ExampleFigureComponent)\n\n  let doc = cfg.createArticle(fixture)\n  let editorSession = new EditorSession(doc, {\n    configurator: cfg\n  })\n  ProseEditor.mount({\n    editorSession: editorSession\n  }, document.body)\n}\n"],"names":["BlockNode","let","TextPropertyEditor","Component","InlineNode","Tool","InsertInlineNodeCommand","EditInlineNodeCommand","AnnotationTool","ProseEditorConfigurator","ProseEditorPackage","EditorSession","ProseEditor"],"mappings":"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"}